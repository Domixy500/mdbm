{"version":3,"file":"mdbm-debug.js","sources":["../src/complex/type/index.js","../src/complex/library/onOpen.js","../src/complex/library/index.js","../src/complex/object/linkWithObject.js","../src/complex/object/onCreate.js","../src/complex/object/index.js"],"sourcesContent":["/*jslint beta*/\n/*global\n    libByName\n*/\n\nconst type = {\n    fromName,\n    link\n};\n\nfunction fromName(typeName) {\n    return types().find(\n        (e) => e.field(\"Name\") === typeName\n    );\n}\n\nfunction link(e, typeName) {\n    const mdbmType = fromName(typeName);\n    e.set(\"mdbm.Type\", mdbmType);\n}\n\nfunction types() {\n    return libByName(\"mdbm.Type\").entries();\n}\n\nexport {\n    type\n};\n","/*jslint beta*/\n/*global\n    lib\n    libByName\n    message\n*/\n\nimport {type} from \"../type\";\n\nconst onOpen = {\n    post\n};\n\nfunction checkLibraryAccess() {\n    libByName(\"Object\");\n    libByName(\"mdbm.Type\");\n}\n\nfunction checkType() {\n    const libraryName = lib().title;\n    const libraryType = type.fromName(libraryName);\n    if (libraryType === undefined) {\n        createType(libraryName);\n        message(\"Type \" + libraryName + \" was created.\");\n    }\n}\n\nfunction createType(libraryName) {\n    const newType = libByName(\"mdbm.Type\").create({});\n    newType.set(\"Name\", libraryName);\n    return newType;\n}\n\nfunction post() {\n    checkLibraryAccess();\n    checkType();\n}\n\nexport {\n    onOpen\n};\n","/*jslint beta*/\n/*global*/\n\nimport {onOpen} from \"./onOpen\";\n\nconst library = {\n    onOpen\n};\n\nexport {\n    library\n};\n","/*jslint beta*/\n/*global\n    libByName\n*/\n\nfunction linkWithObject(e) {\n    const objectEntry = (\n        typeName(e) === \"Object\"\n        ? e\n        : newObjectEntry(e)\n    );\n    e.set(\n        \"mdbm.Object\",\n        objectEntry\n    );\n    e.set(\n        \"mdbm.Id\",\n        objectEntry.field(\"mdbm.Id\")\n    );\n}\n\nfunction newObjectEntry(e) {\n    const newObject = libByName(\"Object\").create({});\n    newObject.link(\"mdbm.Type\", type(e));\n    newObject.link(\"mdbm.Object\", newObject);\n    return newObject;\n}\n\nfunction type(e) {\n    return e.field(\"mdbm.Type\")[0];\n}\n\nfunction typeName(e) {\n    return type(e).field(\"Name\");\n}\n\nexport {\n    linkWithObject\n};\n","/*jslint beta*/\n/*global\n    lib\n*/\n\nimport {linkWithObject} from \"./linkWithObject\";\nimport {type} from \"../type\";\n\nconst onCreate = {\n    open,\n    post\n};\n\nfunction open(e) {\n    type.link(e, lib().title);\n}\n\nfunction post(e) {\n    linkWithObject(e);\n    createMissingTypes(e);\n}\n\n// function pre(e) {\n// }\n\nexport {\n    onCreate\n};\n","/*jslint beta*/\n/*global*/\n\nimport {onCreate} from \"./onCreate\";\n\nconst object = {\n    onCreate\n};\n\nexport {\n    object\n};\n"],"names":["type","fromName","link","typeName","types","find","e","field","mdbmType","set","libByName","entries","onOpen","post","checkLibraryAccess","checkType","libraryName","lib","title","libraryType","undefined","createType","message","newType","create","library","linkWithObject","objectEntry","newObjectEntry","newObject","onCreate","open","createMissingTypes","object"],"mappings":";;IAKA,MAAMA,SAAO;QACTC;QACAC;;IAGJ,SAASD,SAASE;QACd,OAAOC,QAAQC,KACVC,KAAMA,EAAEC,MAAM,YAAYJ;AAEnC;IAEA,SAASD,KAAKI,GAAGH;QACb,MAAMK,WAAWP,SAASE;QAC1BG,EAAEG,IAAI,aAAaD;AACvB;IAEA,SAASJ;QACL,OAAOM,UAAU,aAAaC;AAClC;ICdA,MAAMC,SAAS;QACfC,MAAIA;;IAGJ,SAASC;QACLJ,UAAU;QACVA,UAAU;AACd;IAEA,SAASK;QACL,MAAMC,cAAcC,MAAMC;QAC1B,MAAMC,cAAcnB,OAAKC,SAASe;QAClC,IAAIG,gBAAgBC,WAAW;YAC3BC,WAAWL;YACXM,QAAQ,UAAUN,cAAc;AACpC;AACJ;IAEA,SAASK,WAAWL;QAChB,MAAMO,UAAUb,UAAU,aAAac,OAAO,CAAA;QAC9CD,QAAQd,IAAI,QAAQO;QACpB,OAAOO;AACX;IAEA,SAASV;QACLC;QACAC;AACJ;IC/BK,MAACU,UAAU;QACZb;;ICDJ,SAASc,eAAepB;QACpB,MAAMqB,cACFxB,SAASG,OAAO,WACdA,IACAsB,eAAetB;QAErBA,EAAEG,IACE,eACAkB;QAEJrB,EAAEG,IACE,WACAkB,YAAYpB,MAAM;AAE1B;IAEA,SAASqB,eAAetB;QACpB,MAAMuB,YAAYnB,UAAU,UAAUc,OAAO,CAAA;QAC7CK,UAAU3B,KAAK,aAAaF,KAAKM;QACjCuB,UAAU3B,KAAK,eAAe2B;QAC9B,OAAOA;AACX;IAEA,SAAS7B,KAAKM;QACV,OAAOA,EAAEC,MAAM,aAAa;AAChC;IAEA,SAASJ,SAASG;QACd,OAAON,KAAKM,GAAGC,MAAM;AACzB;IC1BA,MAAMuB,WAAW;QACbC;QACAlB;;IAGJ,SAASkB,KAAKzB;QACVN,OAAKE,KAAKI,GAAGW,MAAMC;AACvB;IAEA,SAASL,KAAKP;QACVoB,eAAepB;QACf0B,mBAAmB1B;AACvB;ICfK,MAAC2B,SAAS;QACXH;;;;;"}
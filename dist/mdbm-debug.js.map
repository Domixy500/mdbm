{"version":3,"file":"mdbm-debug.js","sources":["../src/complex/type/index.js","../src/complex/library/onOpen.js","../src/complex/library/index.js","../src/complex/object/linkWithObject.js","../src/complex/object/onCreate.js","../src/complex/object/index.js"],"sourcesContent":["/*jslint beta*/\r\n/*global\r\n    libByName\r\n*/\r\n\r\nconst type = {\r\n    fromName,\r\n    link\r\n};\r\n\r\nfunction fromName(typeName) {\r\n    return types().find(\r\n        (e) => e.field(\"Name\") === typeName\r\n    );\r\n}\r\n\r\nfunction link(e, typeName) {\r\n    const mdbmType = fromName(typeName);\r\n    e.set(\"mdbm.Type\", mdbmType);\r\n}\r\n\r\nfunction types() {\r\n    return libByName(\"mdbm.Type\").entries();\r\n}\r\n\r\nexport {\r\n    type\r\n};\r\n","/*jslint beta*/\r\n/*global\r\n    lib\r\n    libByName\r\n    message\r\n*/\r\n\r\nimport {type} from \"../type\";\r\n\r\nconst onOpen = {\r\n    post\r\n};\r\n\r\nfunction checkLibraryAccess() {\r\n    libByName(\"Object\");\r\n    libByName(\"mdbm.Type\");\r\n}\r\n\r\nfunction checkType() {\r\n    const libraryName = lib().title;\r\n    const libraryType = type.fromName(libraryName);\r\n    if (libraryType === undefined) {\r\n        createType(libraryName);\r\n        message(`Type '${libraryName}' was created.`);\r\n    }\r\n}\r\n\r\nfunction createType(libraryName) {\r\n    const newType = libByName(\"mdbm.Type\").create({});\r\n    newType.set(\"Name\", libraryName);\r\n    return newType;\r\n}\r\n\r\nfunction post() {\r\n    checkLibraryAccess();\r\n    checkType();\r\n}\r\n\r\nexport {\r\n    onOpen\r\n};\r\n","/*jslint beta*/\r\n/*global*/\r\n\r\nimport {onOpen} from \"./onOpen\";\r\n\r\nconst library = {\r\n    onOpen\r\n};\r\n\r\nexport {\r\n    library\r\n};\r\n","/*jslint beta*/\r\n/*global\r\n    libByName\r\n*/\r\n\r\nfunction linkWithObject(e) {\r\n    const objectEntry = (\r\n        typeName(e) === \"Object\"\r\n        ? e\r\n        : newObjectEntry(e)\r\n    );\r\n    e.set(\r\n        \"mdbm.Object\",\r\n        objectEntry\r\n    );\r\n    e.set(\r\n        \"mdbm.Id\",\r\n        objectEntry.field(\"mdbm.Id\")\r\n    );\r\n}\r\n\r\nfunction newObjectEntry(e) {\r\n    const newObject = libByName(\"Object\").create({});\r\n    newObject.link(\"mdbm.Type\", type(e));\r\n    newObject.link(\"mdbm.Object\", newObject);\r\n    return newObject;\r\n}\r\n\r\nfunction type(e) {\r\n    return e.field(\"mdbm.Type\")[0];\r\n}\r\n\r\nfunction typeName(e) {\r\n    return type(e).field(\"Name\");\r\n}\r\n\r\nexport {\r\n    linkWithObject\r\n};\r\n","/*jslint beta*/\r\n/*global\r\n    lib\r\n*/\r\n\r\nimport {linkWithObject} from \"./linkWithObject\";\r\nimport {type} from \"../type\";\r\n\r\nconst onCreate = {\r\n    open,\r\n    post\r\n};\r\n\r\nfunction open(e) {\r\n    type.link(e, lib().title);\r\n}\r\n\r\nfunction post(e) {\r\n    linkWithObject(e);\r\n}\r\n\r\n// function pre(e) {\r\n// }\r\n\r\nexport {\r\n    onCreate\r\n};\r\n","/*jslint beta*/\r\n/*global*/\r\n\r\nimport {onCreate} from \"./onCreate\";\r\n\r\nconst object = {\r\n    onCreate\r\n};\r\n\r\nexport {\r\n    object\r\n};\r\n"],"names":["type","fromName","link","typeName","types","find","e","field","mdbmType","set","libByName","entries","onOpen","post","checkLibraryAccess","checkType","libraryName","lib","title","libraryType","undefined","createType","message","newType","create","library","linkWithObject","objectEntry","newObjectEntry","newObject","onCreate","open","object"],"mappings":";;IAKA,MAAMA,SAAO;QACTC;QACAC;;IAGJ,SAASD,SAASE;QACd,OAAOC,QAAQC,KACVC,KAAMA,EAAEC,MAAM,YAAYJ;AAEnC;IAEA,SAASD,KAAKI,GAAGH;QACb,MAAMK,WAAWP,SAASE;QAC1BG,EAAEG,IAAI,aAAaD;AACvB;IAEA,SAASJ;QACL,OAAOM,UAAU,aAAaC;AAClC;ICdA,MAAMC,SAAS;QACfC,MAAIA;;IAGJ,SAASC;QACLJ,UAAU;QACVA,UAAU;AACd;IAEA,SAASK;QACL,MAAMC,cAAcC,MAAMC;QAC1B,MAAMC,cAAcnB,OAAKC,SAASe;QAClC,IAAIG,gBAAgBC,WAAW;YAC3BC,WAAWL;YACXM,QAAQ,SAASN;AACrB;AACJ;IAEA,SAASK,WAAWL;QAChB,MAAMO,UAAUb,UAAU,aAAac,OAAO,CAAA;QAC9CD,QAAQd,IAAI,QAAQO;QACpB,OAAOO;AACX;IAEA,SAASV;QACLC;QACAC;AACJ;IC/BK,MAACU,UAAU;QACZb;;ICDJ,SAASc,eAAepB;QACpB,MAAMqB,cACFxB,SAASG,OAAO,WACdA,IACAsB,eAAetB;QAErBA,EAAEG,IACE,eACAkB;QAEJrB,EAAEG,IACE,WACAkB,YAAYpB,MAAM;AAE1B;IAEA,SAASqB,eAAetB;QACpB,MAAMuB,YAAYnB,UAAU,UAAUc,OAAO,CAAA;QAC7CK,UAAU3B,KAAK,aAAaF,KAAKM;QACjCuB,UAAU3B,KAAK,eAAe2B;QAC9B,OAAOA;AACX;IAEA,SAAS7B,KAAKM;QACV,OAAOA,EAAEC,MAAM,aAAa;AAChC;IAEA,SAASJ,SAASG;QACd,OAAON,KAAKM,GAAGC,MAAM;AACzB;IC1BA,MAAMuB,WAAW;QACbC;QACAlB;;IAGJ,SAASkB,KAAKzB;QACVN,OAAKE,KAAKI,GAAGW,MAAMC;AACvB;IAEA,SAASL,KAAKP;QACVoB,eAAepB;AACnB;ICdK,MAAC0B,SAAS;QACXF;;;;;"}
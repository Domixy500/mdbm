{"version":3,"file":"mdbm-debug.js","sources":["../src/app/index.js","../src/mdbm/object/create/fromPrototype.js","../src/mdbm/object/create/index.js","../src/mdbm/object/displayName.js","../src/mdbm/object/index.js","../src/mdbm/property/type.js","../src/mdbm/property/value.js","../src/mdbm/property/valueAsString.js","../src/mdbm/property/fromEntry.js","../src/mdbm/property/index.js"],"sourcesContent":["/*jslint beta*/\n/*global\n    log\n    message\n*/\n\nfunction notify(text) {\n    message(text);\n    log(text);\n};\n\nfunction createEntry(libraryName) {\n    return libByName(\n        libraryName\n    ).create({});\n}\n\nexport {\n    createEntry,\n    notify\n};\n","/*jslint beta*/\n/*global*/\n\nimport {createEntry} from \"@app\";\n\nfunction addAttribute(e, attr) {\n    const property = libByName(\"Property\").create({});\n    property.set(\"Label\", attr.field(\"Label\"));\n    property.set(\"Type\", attr.field(\"Type\"));\n    property.set(\"Order\", attr.field(\"Order\"));\n    property.link(\"Object\", e);\n}\n\nfunction addType(object, prototype) {\n    const basedOn = prototype.field(\"basedOn\");\n    object.link(\"Type\", prototype);\n    if (basedOn.length === 1) {\n        addType(object, basedOn[0]);\n    }\n}\n\nfunction fromPrototype(prototype) {\n    const attributes = prototype.field(\"Attributes\");\n    const object = createEntry(\"Object\");\n    addType(object, prototype);\n    setPrototype(object, prototype);\n    attributes.forEach(\n        (x) => addAttribute(object, x)\n        );\n    \n    return object;\n}\n\nfunction setPrototype(object, prototype) {\n    object.set(\"Prototype\", [prototype]);\n}\n\nexport {\n    fromPrototype\n};\n","/*jslint beta*/\n/*global*/\n\nimport {fromPrototype} from \"./fromPrototype\";\n\nconst create = {\n    fromPrototype\n};\n\nexport {\n    create\n};\n","function patternFromObject(e) {\n    return e.field(\"DisplayNamePattern\") || patternFromPrototype(\n            e.field(\"Prototype\")[0]\n    );\n}\n\n\nfunction patternFromPrototype(e) {\n    return e.field(\"DisplayNamePattern\") || patternFromPrototype(\n            e.field(\"basedOn\")[0]\n    );\n}\n\nfunction displayName(e) {\n    const pattern = patternFromObject(e);\n    const properties = e.linksFrom(\"Property\", \"Object\");\n    \n    function replacer(_, fieldName) {\n        const property = properties.filter(\n            (x) => x.field(\"Label\") === fieldName\n        )[0];\n        return (\n            property\n            ? property.field(\"Value\")\n            : \"\"\n        );\n    }\n\n    return pattern.replace(\n        /\\$\\{([^}]+)\\}/g,\n        replacer\n    );\n}\n\nexport {\n    displayName\n};\n","/*jslint beta*/\n/*global*/\n\nimport {create} from \"./create\";\nimport {displayName} from \"./displayName.js\";\n\nconst object = {\n    displayName,\n    create\n};\n\nexport {\n    object\n};\n","/*jslint beta*/\n/*global*/\n\nfunction type(e) {\n    return e.field(\"Type\");\n}\n\nexport {\n    type\n};\n","/*jslint beta*/\n/*global*/\n\nimport {type} from \"./type\";\n\nfunction value(e, newValue) {\n    const propertyType = type(e);\n    if (newValue !== undefined) {\n        e.set(propertyType, newValue);\n    }\n    return e.field(\n        propertyType\n    );\n}\n\nexport {\n    value\n};\n","/*jslint beta*/\n/*global*/\n\nimport {type} from \"./type\";\nimport {value} from \"./value\";\n\nconst stringConverter = {\n    multiLine: value,\n    singleLine: value\n};\n\nfunction hasConverter(key) {\n    return Object.keys(\n        stringConverter\n    ).includes(key);\n}\n\nfunction valueAsString(e) {\n    const propertyType = type(e);\n\n    return (\n        hasConverter(propertyType)\n        ? stringConverter[propertyType](e)\n        : propertyType\n    );\n}\n\nexport {\n    valueAsString\n};\n","/*jslint beta*/\n/*global*/\n\nimport {type} from \"./type.js\";\nimport {value} from \"./value.js\";\nimport {valueAsString} from \"./valueAsString.js\";\n\nfunction fromEntry(e) {\n    const property = {\n        type: () => type(e),\n        value: (newValue) => value(e, newValue),\n        valueAsString: () => valueAsString(e)\n    }\n    \n    return Object.freeze({\n        property\n    });\n}\n\nexport {\n    fromEntry\n};\n","/*jslint beta*/\n/*global*/\n\nimport {fromEntry} from \"./fromEntry\";\nimport {type} from \"./type\";\nimport {value} from \"./value\";\nimport {valueAsString} from \"./valueAsString\";\n\nconst property = {\n    fromEntry,\n    type,\n    value,\n    valueAsString\n};\n\nexport {\n    property\n};\n"],"names":["notify","text","message","log","createEntry","libraryName","libByName","create","addAttribute","e","attr","property","set","field","link","addType","object","prototype","basedOn","length","fromPrototype","attributes","setPrototype","forEach","x","patternFromObject","patternFromPrototype","displayName","pattern","properties","linksFrom","replacer","_","fieldName","filter","replace","type","value","newValue","propertyType","undefined","stringConverter","multiLine","singleLine","hasConverter","key","Object","keys","includes","valueAsString","fromEntry","freeze"],"mappings":";;IAMA,SAASA,OAAOC;QACZC,QAAQD;QACRE,IAAIF;AACR;IAEA,SAASG,YAAYC;QACjB,OAAOC,UACHD,aACFE,OAAO,CAAA;AACb;ICVA,SAASC,aAAaC,GAAGC;QACrB,MAAMC,WAAWL,UAAU,YAAYC,OAAO,CAAA;QAC9CI,SAASC,IAAI,SAASF,KAAKG,MAAM;QACjCF,SAASC,IAAI,QAAQF,KAAKG,MAAM;QAChCF,SAASC,IAAI,SAASF,KAAKG,MAAM;QACjCF,SAASG,KAAK,UAAUL;AAC5B;IAEA,SAASM,QAAQC,QAAQC;QACrB,MAAMC,UAAUD,UAAUJ,MAAM;QAChCG,OAAOF,KAAK,QAAQG;QACpB,IAAIC,QAAQC,WAAW,GAAG;YACtBJ,QAAQC,QAAQE,QAAQ;AAC5B;AACJ;IAEA,SAASE,cAAcH;QACnB,MAAMI,aAAaJ,UAAUJ,MAAM;QACnC,MAAMG,SAASZ,YAAY;QAC3BW,QAAQC,QAAQC;QAChBK,aAAaN,QAAQC;QACrBI,WAAWE,QACNC,KAAMhB,aAAaQ,QAAQQ;QAGhC,OAAOR;AACX;IAEA,SAASM,aAAaN,QAAQC;QAC1BD,OAAOJ,IAAI,aAAa,EAACK;AAC7B;IC9BA,MAAMV,SAAS;QACXa;;ICNJ,SAASK,kBAAkBhB;QACvB,OAAOA,EAAEI,MAAM,yBAAyBa,qBAChCjB,EAAEI,MAAM,aAAa;AAEjC;IAGA,SAASa,qBAAqBjB;QAC1B,OAAOA,EAAEI,MAAM,yBAAyBa,qBAChCjB,EAAEI,MAAM,WAAW;AAE/B;IAEA,SAASc,YAAYlB;QACjB,MAAMmB,UAAUH,kBAAkBhB;QAClC,MAAMoB,aAAapB,EAAEqB,UAAU,YAAY;QAE3C,SAASC,SAASC,GAAGC;YACjB,MAAMtB,WAAWkB,WAAWK,OACvBV,KAAMA,EAAEX,MAAM,aAAaoB,WAC9B;YACF,OACItB,WACEA,SAASE,MAAM,WACf;AAEV;QAEA,OAAOe,QAAQO,QACX,kBACAJ;AAER;IC1BK,MAACf,SAAS;QACXW;QACApB;;ICLJ,SAAS6B,KAAK3B;QACV,OAAOA,EAAEI,MAAM;AACnB;ICAA,SAASwB,MAAM5B,GAAG6B;QACd,MAAMC,eAAeH,KAAK3B;QAC1B,IAAI6B,aAAaE,WAAW;YACxB/B,EAAEG,IAAI2B,cAAcD;AACxB;QACA,OAAO7B,EAAEI,MACL0B;AAER;ICPA,MAAME,kBAAkB;QACpBC,WAAWL;QACXM,YAAYN;;IAGhB,SAASO,aAAaC;QAClB,OAAOC,OAAOC,KACVN,iBACFO,SAASH;AACf;IAEA,SAASI,cAAcxC;QACnB,MAAM8B,eAAeH,KAAK3B;QAE1B,OACImC,aAAaL,gBACXE,gBAAgBF,cAAc9B,KAC9B8B;AAEV;IClBA,SAASW,UAAUzC;QACf,MAAME,WAAW;YACbyB,MAAM,MAAMA,KAAK3B;YACjB4B,OAAQC,YAAaD,MAAM5B,GAAG6B;YAC9BW,eAAe,MAAMA,cAAcxC;;QAGvC,OAAOqC,OAAOK,OAAO;YACjBxC;;AAER;ICTK,MAACA,WAAW;QACbuC;QACAd;QACAC;QACAY;;;;;;"}
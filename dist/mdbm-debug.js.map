{"version":3,"file":"mdbm-debug.js","sources":["../src/app/index.js","../src/mdbm/object/create/fromPrototype.js","../src/mdbm/object/create/index.js","../src/mdbm/object/displayName.js","../src/mdbm/object/index.js","../src/mdbm/property/type.js","../src/mdbm/property/value.js","../src/mdbm/property/valueAsString.js","../src/mdbm/property/fromEntry.js","../src/mdbm/property/index.js"],"sourcesContent":["/*jslint beta*/\n/*global\n    log\n    message\n*/\n\nfunction notify(text) {\n    message(text);\n    log(text);\n};\n\nfunction createEntry(libraryName) {\n    return libByName(\n        libraryName\n    ).create({});\n}\n\nexport {\n    createEntry,\n    notify\n};\n","/*jslint beta*/\n/*global*/\n\nimport {createEntry} from \"@app\";\n\nfunction addAttribute(e, attr) {\n    const property = libByName(\"Property\").create({});\n    property.set(\"Label\", attr.field(\"Label\"));\n    property.set(\"Type\", attr.field(\"Type\"));\n    property.set(\"Order\", attr.field(\"Order\"));\n    property.link(\"Object\", e);\n}\n\nfunction addType(object, prototype) {\n    const basedOn = prototype.field(\"basedOn\");\n    object.link(\"Type\", prototype);\n    if (basedOn.length === 1) {\n        addType(object, basedOn[0]);\n    }\n}\n\nfunction fromPrototype(prototype) {\n    const attributes = prototype.field(\"Attributes\");\n    const object = createEntry(\"Object\");\n    addType(object, prototype);\n    setPrototype(object, prototype);\n    attributes.forEach(\n        (x) => addAttribute(object, x)\n        );\n    \n    return object;\n}\n\nfunction setPrototype(object, prototype) {\n    object.set(\"Prototype\", [prototype]);\n}\n\nexport {\n    fromPrototype\n};\n","/*jslint beta*/\n/*global*/\n\nimport {fromPrototype} from \"./fromPrototype\";\n\nconst create = {\n    fromPrototype\n};\n\nexport {\n    create\n};\n","/*jslint beta*/\n/*global*/\n\nfunction getPattern(e) {\n    return e.field(\"DisplayNamePattern\");\n}\n\nfunction patternFromObject(e) {\n    return getPattern(e) || patternFromPrototype(\n        e.field(\"Prototype\")[0]\n    );\n}\n\nfunction patternFromPrototype(e) {\n    return getPattern(e) || patternFromPrototype(\n        e.field(\"basedOn\")[0]\n    );\n}\n\nfunction displayName(e) {\n    const pattern = patternFromObject(e);\n    const properties = e.linksFrom(\"Property\", \"Object\");\n    \n    function replacer(_, fieldName) {\n        const property = properties.filter(\n            (x) => x.field(\"Label\") === fieldName\n        )[0];\n        return (\n            property\n            ? property.field(\"Value\")\n            : \"\"\n        );\n    }\n\n    return pattern.replace(\n        /\\$\\{([^}]+)\\}/g,\n        replacer\n    );\n}\n\nexport {\n    displayName\n};\n","/*jslint beta*/\n/*global*/\n\nimport {create} from \"./create\";\nimport {displayName} from \"./displayName.js\";\n\nconst object = {\n    displayName,\n    create\n};\n\nexport {\n    object\n};\n","/*jslint beta*/\n/*global*/\n\nfunction type(e) {\n    return e.field(\"Type\");\n}\n\nexport {\n    type\n};\n","/*jslint beta*/\n/*global*/\n\nimport {type} from \"./type\";\n\nfunction value(e, newValue) {\n    const propertyType = type(e);\n    if (newValue !== undefined) {\n        e.set(propertyType, newValue);\n    }\n    return e.field(\n        propertyType\n    );\n}\n\nexport {\n    value\n};\n","/*jslint beta*/\n/*global*/\n\nimport {type} from \"./type\";\nimport {value} from \"./value\";\n\nconst stringConverter = {\n    calculated: calculate,\n    multiLine: value,\n    singleLine: value\n};\n\nfunction calculate(e) {\n    const object = e.field(\"Object\")[0];\n    return object.field(\"Id\");\n}\n\nfunction hasConverter(key) {\n    return Object.keys(\n        stringConverter\n    ).includes(key);\n}\n\nfunction valueAsString(e) {\n    const propertyType = type(e);\n\n    return (\n        hasConverter(propertyType)\n        ? stringConverter[propertyType](e)\n        : propertyType\n    );\n}\n\nexport {\n    valueAsString\n};\n","/*jslint beta*/\n/*global*/\n\nimport {type} from \"./type.js\";\nimport {value} from \"./value.js\";\nimport {valueAsString} from \"./valueAsString.js\";\n\nfunction fromEntry(e) {\n    const property = {\n        type: () => type(e),\n        value: (newValue) => value(e, newValue),\n        valueAsString: () => valueAsString(e)\n    }\n    \n    return Object.freeze({\n        property\n    });\n}\n\nexport {\n    fromEntry\n};\n","/*jslint beta*/\n/*global*/\n\nimport {fromEntry} from \"./fromEntry\";\nimport {type} from \"./type\";\nimport {value} from \"./value\";\nimport {valueAsString} from \"./valueAsString\";\n\nconst property = {\n    fromEntry,\n    type,\n    value,\n    valueAsString\n};\n\nexport {\n    property\n};\n"],"names":["notify","text","message","log","createEntry","libraryName","libByName","create","addAttribute","e","attr","property","set","field","link","addType","object","prototype","basedOn","length","fromPrototype","attributes","setPrototype","forEach","x","getPattern","patternFromObject","patternFromPrototype","displayName","pattern","properties","linksFrom","replacer","_","fieldName","filter","replace","type","value","newValue","propertyType","undefined","stringConverter","calculated","calculate","multiLine","singleLine","hasConverter","key","Object","keys","includes","valueAsString","fromEntry","freeze"],"mappings":";;IAMA,SAASA,OAAOC;QACZC,QAAQD;QACRE,IAAIF;AACR;IAEA,SAASG,YAAYC;QACjB,OAAOC,UACHD,aACFE,OAAO,CAAA;AACb;ICVA,SAASC,aAAaC,GAAGC;QACrB,MAAMC,WAAWL,UAAU,YAAYC,OAAO,CAAA;QAC9CI,SAASC,IAAI,SAASF,KAAKG,MAAM;QACjCF,SAASC,IAAI,QAAQF,KAAKG,MAAM;QAChCF,SAASC,IAAI,SAASF,KAAKG,MAAM;QACjCF,SAASG,KAAK,UAAUL;AAC5B;IAEA,SAASM,QAAQC,QAAQC;QACrB,MAAMC,UAAUD,UAAUJ,MAAM;QAChCG,OAAOF,KAAK,QAAQG;QACpB,IAAIC,QAAQC,WAAW,GAAG;YACtBJ,QAAQC,QAAQE,QAAQ;AAC5B;AACJ;IAEA,SAASE,cAAcH;QACnB,MAAMI,aAAaJ,UAAUJ,MAAM;QACnC,MAAMG,SAASZ,YAAY;QAC3BW,QAAQC,QAAQC;QAChBK,aAAaN,QAAQC;QACrBI,WAAWE,QACNC,KAAMhB,aAAaQ,QAAQQ;QAGhC,OAAOR;AACX;IAEA,SAASM,aAAaN,QAAQC;QAC1BD,OAAOJ,IAAI,aAAa,EAACK;AAC7B;IC9BA,MAAMV,SAAS;QACXa;;ICHJ,SAASK,WAAWhB;QAChB,OAAOA,EAAEI,MAAM;AACnB;IAEA,SAASa,kBAAkBjB;QACvB,OAAOgB,WAAWhB,MAAMkB,qBACpBlB,EAAEI,MAAM,aAAa;AAE7B;IAEA,SAASc,qBAAqBlB;QAC1B,OAAOgB,WAAWhB,MAAMkB,qBACpBlB,EAAEI,MAAM,WAAW;AAE3B;IAEA,SAASe,YAAYnB;QACjB,MAAMoB,UAAUH,kBAAkBjB;QAClC,MAAMqB,aAAarB,EAAEsB,UAAU,YAAY;QAE3C,SAASC,SAASC,GAAGC;YACjB,MAAMvB,WAAWmB,WAAWK,OACvBX,KAAMA,EAAEX,MAAM,aAAaqB,WAC9B;YACF,OACIvB,WACEA,SAASE,MAAM,WACf;AAEV;QAEA,OAAOgB,QAAQO,QACX,kBACAJ;AAER;IChCK,MAAChB,SAAS;QACXY;QACArB;;ICLJ,SAAS8B,KAAK5B;QACV,OAAOA,EAAEI,MAAM;AACnB;ICAA,SAASyB,MAAM7B,GAAG8B;QACd,MAAMC,eAAeH,KAAK5B;QAC1B,IAAI8B,aAAaE,WAAW;YACxBhC,EAAEG,IAAI4B,cAAcD;AACxB;QACA,OAAO9B,EAAEI,MACL2B;AAER;ICPA,MAAME,kBAAkB;QACpBC,YAAYC;QACZC,WAAWP;QACXQ,YAAYR;;IAGhB,SAASM,UAAUnC;QACf,MAAMO,SAASP,EAAEI,MAAM,UAAU;QACjC,OAAOG,OAAOH,MAAM;AACxB;IAEA,SAASkC,aAAaC;QAClB,OAAOC,OAAOC,KACVR,iBACFS,SAASH;AACf;IAEA,SAASI,cAAc3C;QACnB,MAAM+B,eAAeH,KAAK5B;QAE1B,OACIsC,aAAaP,gBACXE,gBAAgBF,cAAc/B,KAC9B+B;AAEV;ICxBA,SAASa,UAAU5C;QACf,MAAME,WAAW;YACb0B,MAAM,MAAMA,KAAK5B;YACjB6B,OAAQC,YAAaD,MAAM7B,GAAG8B;YAC9Ba,eAAe,MAAMA,cAAc3C;;QAGvC,OAAOwC,OAAOK,OAAO;YACjB3C;;AAER;ICTK,MAACA,WAAW;QACb0C;QACAhB;QACAC;QACAc;;;;;;"}